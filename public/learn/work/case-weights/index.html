<!DOCTYPE html>
<html>
<head>
<!DOCTYPE html>
<html lang="en-us">



<link rel="stylesheet" href="/css/fonts.css">
<link rel="stylesheet" href="/css/main-site.css">
<link rel="stylesheet" href="/css/fa5-all.css">
<style type="text/css">
    body {
	background-color: #ffffff;
	color: #404040
}

/* Links */

a {
  color: #CA225E;
}

a:hover {
  color: #cc3168;
}

/* Landing page content bands */

#homeContent .band.first {
  background-color: #ffffff
}

#homeContent .band.second {
  background-color: #fcfcfc
}

#homeContent .band.third {
  background-color: #ffffff
}

/* Top navigation bar menu */

#rStudioHeader {
  background-color: #ffffff;
  color: black;
}

#rStudioHeader .productName {
  color: #CA225E
}

#rStudioHeader .productName:hover {
  color: #00000075
}

#rStudioHeader #menu .menuItem.a {
  background-color: #75aadb;
  color: black;
}

#rStudioHeader #menu .menuItem:hover {
  background-color: white;
  color: #CA225E;
}

#rStudioHeader #menu .menuItem.current {
  background-color: #fcfcfc;
  color: #CA225E;
  text-decoration: none;
}

/* Footer */

#rStudioFooter.band {
  background-color: #CA225E40;
}

#rStudioFooter .bandContent #copyright {
  color: #CA225E;
}

/* Tables */

table tbody tr:nth-child(even){
  background-color: #fcfcfc;
}

table tbody tr:nth-child(odd){
  background-color: #1a162d10;
}

.latest {
  border-top: .5em solid <no value>;
}
</style>

  <link rel="stylesheet" href="/css/tm.css">




<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes" />

<meta name="og:image" content="https://www.tidymodels.org/images/feature_summary_large_image.jpg" >

  <meta property="twitter:card" content="summary_large_image">

<meta name="twitter:image" content="https://www.tidymodels.org/images/feature_summary_large_image.jpg" ><meta name="generator" content="Hugo 0.96.0" />

<meta property="og:type" content="website"><title>Learn - Creating case weights based on time</title>
    <meta property="og:title" content="Learn - Creating case weights based on time">
    
    
    
    
    <meta property="description" content="Create models that use coefficients, extract them from fitted models, and visualize them.
">
    <meta property="og:description" content="Create models that use coefficients, extract them from fitted models, and visualize them.
">



<link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png" />
<link rel="manifest" href="/images/favicons/site.webmanifest" />
<link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" />
<link rel="shortcut icon" href="/images/favicons/favicon.ico" />
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" href="/images/favicons/browserconfig.xml" >



<script type="text/javascript" src="/js/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="/js/site.js"></script>


  <script type="text/javascript" src="/js/tm.js"></script>


<link rel="icon" href="/images/favicon.ico" />


<script defer data-domain="tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>



  <body>
    <div id="appTidyverseSite" class="shrinkHeader alwaysShrinkHeader">
      <div id="main">
        
        <div id="rStudioHeader">
          <div class="band">
            <div class="innards bandContent">
              <div>
                <a class="productName" href="/">Tidymodels</a>
                
              </div>
              <div id="menu">
  <div id="menuToggler"></div>
  <div id="menuItems" class="">
    
    
      
      
      
    <a class="menuItem " href="/packages/">Packages</a>
    
      
      
      
    <a class="menuItem " href="/start/">Get Started</a>
    
      
      
      
    <a class="menuItem current" href="/learn/">Learn</a>
    
      
      
      
    <a class="menuItem " href="/help/">Help</a>
    
      
      
      
    <a class="menuItem " href="/contribute/">Contribute</a>
    
      
      
      
    <a class="menuItem " href="/find/"><i class="fas fa-search fa-lg"></i> </a>
    
      
      
      
    <a class="menuItem " href="https://github.com/tidymodels/"><i class="fab fa-github fa-lg"></i></a>
    
  </div>
</div>

            </div>
          </div>
        </div>
</head>
<body>


 




<div class="band padForHeader pushFooter">
  <div class="bandContent">
    <div class="full splitColumns withMobileMargins">
      <div class="column75">
        
        <div class="section">
          <div class="sectionTitle">
            <a href="/learn/">
              <i class="fas fa-chevron-left"></i>&nbsp;Back to Learn
            </a>
          </div>
        </div>

      <h1 class="article-title">Creating case weights based on time</h1>

      
      <div class="article-header">
        </div>
        

      
      
      
      
        </p>
      
        
      <div class="learning-objective-container">
        <h2 class="learning-objective">Learning objective</h2>
        <p class="single-learning-objective-text">Create models that use coefficients, extract them from fitted models, and visualize them.</p>
      </div>
      

      <div class="article-content">
      <h2 id="introduction">Introduction</h2>
<p>To use the code in this article, you will need to install the following packages: tidymodels.</p>
<p>This article demonstrates how to create and use importance weights in a predictive model. Using importance weights is a way to have our model care more about some observations than others.</p>
<h2 id="example-data">Example Data</h2>
<p>To demonstrate we will use the Chicago data from the modeldata package.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#00f">library</span>(tidymodels)
</span></span><span style="display:flex;"><span><span style="color:#00f">data</span>(Chicago)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Chicago <span style="color:#666">&lt;-</span> Chicago <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">select</span>(ridership, date, <span style="color:#00f">one_of</span>(stations))
</span></span></code></pre></div><p>From <code>?Chicago</code></p>
<blockquote>
<p>These data are from Kuhn and Johnson (2020) and contain an abbreviated training set for modeling the number of people (in thousands) who enter the Clark and Lake L station.</p>
</blockquote>
<blockquote>
<p>The date column corresponds to the current date. The columns with station names (Austin through California) are a sample of the columns used in the original analysis (for filesize reasons). These are 14 day lag variables (i.e. date - 14 days). There are columns related to weather and sports team schedules.</p>
</blockquote>
<p>For simplicity, we have limited our view to the date and station variables.</p>
<h2 id="creating-weights">Creating weights</h2>
<p>This data set contains daily information from 2001-01-22 to 2016-08-28. We will pretend that it is January 1st, 2016 and we want to predict the ridership for the remainder of 2016 using the date and station variables as predictors. Without any weighting, all the previous observations would have the same influence on the model. This may not be ideal since some observations appear a long time ago and not be as representative of the future as more recent observations.</p>
<p>We could just use recent observations to fit the model, ensuring that the training data stays as close to the testing data as possible. While a tempting idea, it would throw out a lot of informative data. Instead let us assign a weight to each observation, related to how long ago the observation was taken. This way we are not completely throwing away any observation; we are only giving less weight to data farther in the past.</p>
<p>We need to decide on a way to calculate the case weights. The main thing constraint is that the weight cannot be negative, and it would be nice if today was weighted as 1. So we need a function that is 1 when <code>x = 0</code> and decreasing otherwise. There are many kinds of functions like that, and we will be using this exponential decay function</p>
<p>$$ weight = base ^ x $$</p>
<p>where <code>base</code> is some constant and <code>x</code> is the number of days. To make sure that we select a reasonable <code>base</code>, we need to do some manual testing, starting with looking at how old the oldest observation is.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#00f">difftime</span>(<span style="color:#ba2121">&#34;2016-01-01&#34;</span>, <span style="color:#00f">min</span>(Chicago<span style="color:#666">$</span>date))
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Time difference of 5457 days</span>
</span></span></code></pre></div><p>Using this information we can visualize the weight curve, to see if we like the value of <code>base</code>.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>tibble_days <span style="color:#666">&lt;-</span> <span style="color:#00f">tibble</span>(days <span style="color:#666">=</span> <span style="color:#666">0</span><span style="color:#666">:</span><span style="color:#666">5457</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tibble_days <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">ggplot</span>(<span style="color:#00f">aes</span>(days)) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">geom_function</span>(fun <span style="color:#666">=</span> <span style="color:#666">~</span> <span style="color:#666">0.99</span> ^ .x)
</span></span></code></pre></div><img src="figs/unnamed-chunk-3-1.svg" width="672" />
<p>setting <code>base</code> to 0.99 appears to be down weighted too much. Any observation more than a year old would have no influence.</p>
<p>Let us try a few more values to find</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#00f">map_dfr</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#00f">c</span>(<span style="color:#666">0.99</span>, <span style="color:#666">0.999</span>, <span style="color:#666">0.9999</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#666">~</span> tibble_days <span style="color:#666">%&gt;%</span> <span style="color:#00f">mutate</span>(base <span style="color:#666">=</span> <span style="color:#00f">factor</span>(.x), value <span style="color:#666">=</span> .x ^ days)
</span></span><span style="display:flex;"><span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">ggplot</span>(<span style="color:#00f">aes</span>(days, value, group <span style="color:#666">=</span> base, color <span style="color:#666">=</span> base)) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">geom_line</span>()
</span></span></code></pre></div><img src="figs/unnamed-chunk-4-1.svg" width="672" />
<p>From this, we could pick something around 0.999 since it gives a better balance. Let&rsquo;s create a small function to help us encode this weight.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>weights_from_dates <span style="color:#666">&lt;-</span> <span style="color:#00f">function</span>(x, ref) {
</span></span><span style="display:flex;"><span>  <span style="color:#00f">if_else</span>(
</span></span><span style="display:flex;"><span>    condition <span style="color:#666">=</span> x <span style="color:#666">&gt;=</span> ref,
</span></span><span style="display:flex;"><span>    true <span style="color:#666">=</span> <span style="color:#666">1</span>,     <span style="color:#408080;font-style:italic"># &lt;- Notice that I&#39;m setting any future weight to 1.</span>
</span></span><span style="display:flex;"><span>    false <span style="color:#666">=</span> <span style="color:#666">0.999</span> ^ <span style="color:#00f">as.numeric</span>(<span style="color:#00f">difftime</span>(ref, x, units <span style="color:#666">=</span> <span style="color:#ba2121">&#34;days&#34;</span>))
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>We then modify <code>Chicago</code> to add a weight column, explicitly making it an importance weight with <code>importance_weight()</code>.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Chicago <span style="color:#666">&lt;-</span> Chicago <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">mutate</span>(weight <span style="color:#666">=</span> <span style="color:#00f">weights_from_dates</span>(date, <span style="color:#ba2121">&#34;2016-01-01&#34;</span>),
</span></span><span style="display:flex;"><span>         weight <span style="color:#666">=</span> <span style="color:#00f">importance_weights</span>(weight))
</span></span></code></pre></div><p>This approach to creating importance weights from dates is not limited to cases where we have daily observations. You are free to create similar weights if you have gaps or repeated observations within the same day. Likewise, you don&rsquo;t need to use days as the unit. Seconds, weeks, or years could be used as well.</p>
<h2 id="modeling">Modeling</h2>
<p>We start by splitting up our data into a training and testing set based on the day <code>&quot;2016-01-01&quot;</code>. We added weights to the data set before splitting it so each set has weights.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Chicago_train <span style="color:#666">&lt;-</span> Chicago <span style="color:#666">%&gt;%</span> <span style="color:#00f">filter</span>(date <span style="color:#666">&lt;</span> <span style="color:#ba2121">&#34;2016-01-01&#34;</span>)
</span></span><span style="display:flex;"><span>Chicago_test <span style="color:#666">&lt;-</span> Chicago <span style="color:#666">%&gt;%</span> <span style="color:#00f">filter</span>(date <span style="color:#666">&gt;=</span> <span style="color:#ba2121">&#34;2016-01-01&#34;</span>)
</span></span></code></pre></div><p>Next, we are going to create a recipe. The weights won&rsquo;t have any influence on the preprocessing since none of these operations are supervised and we are using importance weights.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>base_recipe <span style="color:#666">&lt;-</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">recipe</span>(ridership <span style="color:#666">~</span> ., data <span style="color:#666">=</span> Chicago_train) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># Create date features</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">step_date</span>(date) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">step_holiday</span>(date, keep_original_cols <span style="color:#666">=</span> <span style="color:#008000;font-weight:bold">FALSE</span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># Remove any columns with a single unique value</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">step_zv</span>(<span style="color:#00f">all_predictors</span>()) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># Normalize all the numerical features</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">step_normalize</span>(<span style="color:#00f">all_numeric_predictors</span>()) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#408080;font-style:italic"># Perform PCA to reduce the correlation bet the stations</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">step_pca</span>(<span style="color:#00f">all_numeric_predictors</span>(), threshold <span style="color:#666">=</span> <span style="color:#666">0.95</span>)
</span></span></code></pre></div><p>Next we need to build the rest of the workflow. We use a linear regression specification</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>lm_spec <span style="color:#666">&lt;-</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">linear_reg</span>() <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">set_engine</span>(<span style="color:#ba2121">&#34;lm&#34;</span>)
</span></span></code></pre></div><p>and we add these together in the workflow. To activate the case weights, we use the <code>add_case_weights()</code> function to specify the name of the case weights being used.</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>lm_wflow <span style="color:#666">&lt;-</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">workflow</span>() <span style="color:#666">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#00f">add_case_weights</span>(weight) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">add_recipe</span>(base_recipe) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00f">add_model</span>(lm_spec)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>lm_wflow
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ══ Workflow ══════════════════════════════════════════════════════════</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Preprocessor: Recipe</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Model: linear_reg()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Preprocessor ──────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; 5 Recipe Steps</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_date()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_holiday()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_zv()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_normalize()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_pca()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Case Weights ──────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; weight</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Model ─────────────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Linear Regression Model Specification (regression)</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Computational engine: lm</span>
</span></span></code></pre></div><p>With all that done we can fit the workflow with the usual syntax:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>lm_fit <span style="color:#666">&lt;-</span> <span style="color:#00f">fit</span>(lm_wflow, data <span style="color:#666">=</span> Chicago_train)
</span></span><span style="display:flex;"><span>lm_fit
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ══ Workflow [trained] ════════════════════════════════════════════════</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Preprocessor: Recipe</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Model: linear_reg()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Preprocessor ──────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; 5 Recipe Steps</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_date()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_holiday()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_zv()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_normalize()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; • step_pca()</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Case Weights ──────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; weight</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; ── Model ─────────────────────────────────────────────────────────────</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Call:</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; stats::lm(formula = ..y ~ ., data = data, weights = weights)</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; Coefficients:</span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;   (Intercept)    date_dowMon    date_dowTue    date_dowWed    date_dowThu  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;       1.76260       13.30765       14.68903       14.62018       14.38231  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;   date_dowFri    date_dowSat  date_monthFeb  date_monthMar  date_monthApr  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;      13.69543        1.22823        0.36434        1.34823        1.40990  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; date_monthMay  date_monthJun  date_monthJul  date_monthAug  date_monthSep  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;       1.18819        2.59830        2.21972        2.40700        1.93206  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt; date_monthOct  date_monthNov  date_monthDec            PC1            PC2  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;       2.65555        0.90901       -0.00475        0.07301       -1.59102  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;           PC3            PC4            PC5  </span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">#&gt;       0.60839       -0.20531       -0.69601</span>
</span></span></code></pre></div><h2 id="session-information">Session information</h2>
<pre tabindex="0"><code>#&gt; ─ Session info ─────────────────────────────────────────────────────
#&gt;  setting  value
#&gt;  version  R version 4.2.0 (2022-04-22)
#&gt;  os       macOS Big Sur/Monterey 10.16
#&gt;  system   x86_64, darwin17.0
#&gt;  ui       X11
#&gt;  language (EN)
#&gt;  collate  en_US.UTF-8
#&gt;  ctype    en_US.UTF-8
#&gt;  tz       America/New_York
#&gt;  date     2022-07-19
#&gt;  pandoc   2.18 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/tools/ (via rmarkdown)
#&gt; 
#&gt; ─ Packages ─────────────────────────────────────────────────────────
#&gt;  package    * version date (UTC) lib source
#&gt;  broom      * 1.0.0   2022-07-01 [1] CRAN (R 4.2.0)
#&gt;  dials      * 1.0.0   2022-06-14 [1] CRAN (R 4.2.0)
#&gt;  dplyr      * 1.0.9   2022-04-28 [1] CRAN (R 4.2.0)
#&gt;  ggplot2    * 3.3.6   2022-05-03 [1] CRAN (R 4.2.0)
#&gt;  infer      * 1.0.2   2022-06-10 [1] CRAN (R 4.2.0)
#&gt;  parsnip    * 1.0.0   2022-06-16 [1] CRAN (R 4.2.0)
#&gt;  purrr      * 0.3.4   2020-04-17 [1] CRAN (R 4.2.0)
#&gt;  recipes    * 1.0.1   2022-07-07 [1] CRAN (R 4.2.0)
#&gt;  rlang        1.0.3   2022-06-27 [1] CRAN (R 4.2.0)
#&gt;  rsample    * 1.0.0   2022-06-24 [1] CRAN (R 4.2.0)
#&gt;  tibble     * 3.1.7   2022-05-03 [1] CRAN (R 4.2.0)
#&gt;  tidymodels * 1.0.0   2022-07-13 [1] CRAN (R 4.2.0)
#&gt;  tune       * 1.0.0   2022-07-07 [1] CRAN (R 4.2.0)
#&gt;  workflows  * 1.0.0   2022-07-05 [1] CRAN (R 4.2.0)
#&gt;  yardstick  * 1.0.0   2022-06-06 [1] CRAN (R 4.2.0)
#&gt; 
#&gt;  [1] /Library/Frameworks/R.framework/Versions/4.2/Resources/library
#&gt; 
#&gt; ────────────────────────────────────────────────────────────────────
</code></pre>
      </div>


      <div class="article-footer">
      
      <div style="float:left">
      
        <div class='itemTitle' align="left" style='font-size:.8em; line-height:2em'>Previous</div>
        <a href="/learn/work/tune-text/">Tuning text models</a>
      
      </div>
      
      
      <div style="float:right">
      
      <div class='itemTitle' align="right" style='font-size:.8em; line-height:2em'>Next</div>
        <a href="/learn/work/multi-scale/">Multi-scale model assessment with spatialsample</a>
      
      </div>
     </div> 

      </div>

      <div class="column25">
        <div class="section hideOnMobile">
          <div class="sectionTitle">Contents</div>
          <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#example-data">Example Data</a></li>
    <li><a href="#creating-weights">Creating weights</a></li>
    <li><a href="#modeling">Modeling</a></li>
    <li><a href="#session-information">Session information</a></li>
  </ul>
</nav>
        </div>
      
        <div class="section">
          <div class="sectionTitle">Resources</div>
          




<div class="event">
  
  <div class="eventTitle">
    <a href="/find/"><i class="fas fa-search fa-xs"></i>&nbsp;&nbsp;Find</a>
  </div>
  <div class="eventDetails">Explore searchable tables of all tidymodels packages and functions.</div>
</div>






<div class="event">
  
  <div class="eventTitle">
    <a href="/books/"><i class="fas fa-book-open fa-xs"></i>&nbsp;&nbsp;Books</a>
  </div>
  <div class="eventDetails">Study up on statistics and modeling with our comprehensive books.</div>
</div>






<div class="event">
  
  <div class="eventTitle">
    <a href="https://www.tidyverse.org/tags/tidymodels/" target="_blank"><i class="fas fa-bullhorn fa-xs"></i>&nbsp;&nbsp;News</a>
  </div>
  <div class="eventDetails">Hear the latest about tidymodels packages at the <a href="https://www.tidyverse.org/tags/tidymodels/">tidyverse blog</a>.</div>
</div>



        </div>
      </div>
      


    </div>
  </div>  
</div> 


        <div id="rStudioFooter" class="band">
          <div class="bandContent">
            <div id="copyright">
              
              
              Proudly supported by <a class="rstudioLogo" href="https://www.rstudio.com/"></a>
              
            </div>
            <div id="logos">
              
              
            </div>
            
            <span class="float-right" aria-hidden="true">
              <a href="#" class="back-to-top">
                <span class="button_icon">
                  <i class="fas fa-chevron-up fa-2x"></i>
                </span>
              </a>
            </span>
            
          </div>
        </div>

      </div>  
    </div>  

    

    
<script src="/js/math-code.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
<script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-20375833-29', 'auto');
	
	ga('send', 'pageview');
}
</script>

  </body>
</html>

</body>
</html>
